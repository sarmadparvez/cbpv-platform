<div class="page-content">
  <div>Here you can see all the Users that exist in the system.</div>

  <div [hidden]="dataSource?.data?.length < 1">
    <!--Users table-->
    <h2>Users</h2>

    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8" matSort>
      <!-- First name Column -->
      <ng-container matColumnDef="firstName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{ 'name.firstName' | translate }}
        </th>
        <td mat-cell *matCellDef="let user">{{ user.firstName }}</td>
      </ng-container>
      <!-- Last name Column -->
      <ng-container matColumnDef="lastName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{ 'name.lastName' | translate }}
        </th>
        <td mat-cell *matCellDef="let user" class="center">{{ user.lastName }}</td>
      </ng-container>
      <!-- Username Column -->
      <ng-container matColumnDef="username">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{ 'name.username' | translate }}
        </th>
        <td mat-cell *matCellDef="let user">{{ user.username }}</td>
      </ng-container>
      <!-- Experience Column -->
      <ng-container matColumnDef="roles">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{ 'name.roles' | translate }}
        </th>
        <td mat-cell *matCellDef="let user">
          <mat-chip-list>
            <mat-chip *ngFor="let role of user.roles">
              {{ 'role.' + role | translate }}</mat-chip
            >
          </mat-chip-list>
        </td>
      </ng-container>
      <!-- Skills Column -->
      <ng-container matColumnDef="skills">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{ 'name.skills' | translate }}
        </th>
        <td mat-cell *matCellDef="let user" class="skills">
          <mat-chip-list>
            <mat-chip *ngFor="let skill of user.skills">{{
              skill.name
            }}</mat-chip>
          </mat-chip-list>
        </td>
      </ng-container>
      <!-- Country Column -->
      <ng-container matColumnDef="country">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{ 'name.country' | translate }}
        </th>
        <td mat-cell *matCellDef="let user">
          {{ user.country?.name }}
        </td>
      </ng-container>
      <!-- Experience Column -->
      <ng-container matColumnDef="experience">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{ 'name.experience' | translate }}
        </th>
        <td mat-cell *matCellDef="let user" class="center">{{ user.experience }}</td>
      </ng-container>
      <!-- Birthdate Column -->
      <ng-container matColumnDef="birthDate">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{ 'name.birthdate' | translate }}
        </th>
        <td mat-cell *matCellDef="let user">
          {{ user.birthDate | date: 'dd.MM.y' }}
        </td>
      </ng-container>
      <!-- Creation date Column -->
      <ng-container matColumnDef="dateCreated">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{ 'name.dateCreated' | translate }}
        </th>
        <td mat-cell *matCellDef="let user">
          {{ user.dateCreated | date: 'dd.MM.y HH:mm:ss' }}
        </td>
      </ng-container>
      <!-- Options Column -->
      <ng-container matColumnDef="options">
        <th mat-header-cell *matHeaderCellDef>
          <span class="float-right">Options</span>
        </th>
        <td mat-cell *matCellDef="let element">
          <button
            class="float-right"
            (click)="$event.stopPropagation()"
            [matMenuTriggerFor]="menu"
            mat-icon-button
          >
            <mat-icon>more_vert</mat-icon>
          </button>
          <mat-menu #menu>
            <button (click)="deleteUser(element.id)" mat-menu-item>
              <span>{{ 'action.delete' | translate }}</span>
            </button>
          </mat-menu>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
    <mat-paginator
      class="mat-elevation-z8"
      [pageSizeOptions]="[25, 50, 100]"
      showFirstLastButtons="true"
    ></mat-paginator>
  </div>
</div>
<app-no-data *ngIf="dataSource?.data?.length < 1"></app-no-data>
